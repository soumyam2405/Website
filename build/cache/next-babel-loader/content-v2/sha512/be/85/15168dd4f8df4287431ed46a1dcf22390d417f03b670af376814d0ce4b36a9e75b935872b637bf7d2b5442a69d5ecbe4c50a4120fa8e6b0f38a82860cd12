{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"F:\\\\DiscordHookSite\\\\modules\\\\editor\\\\Editor.tsx\",\n    _s = $RefreshSig$();\n\nimport { useObserver } from \"mobx-react-lite\";\nimport dynamic from \"next/dynamic\";\nimport { transparentize } from \"polished\";\nimport React, { Fragment, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useWindowEvent } from \"../../common/dom/useWindowEvent\";\nimport { PrimaryButton } from \"../../common/input/button/PrimaryButton\";\nimport { SecondaryButton } from \"../../common/input/button/SecondaryButton\";\nimport { ButtonList } from \"../../common/layout/ButtonList\";\nimport { Separator } from \"../../common/layout/Separator\";\nimport { Stack } from \"../../common/layout/Stack\";\nimport { ModalManagerContext } from \"../../common/modal/ModalManagerContext\";\nimport { usePreference } from \"../../common/settings/usePreference\";\nimport { useLazyValue } from \"../../common/state/useLazyValue\";\nimport { useRequiredContext } from \"../../common/state/useRequiredContext\";\nimport { Markdown } from \"../markdown/Markdown\";\nimport { createEditorForm } from \"../message/state/editorForm\";\nimport { EditorManagerContext } from \"./EditorManagerContext\";\nimport { ClearAllConfirmationModal } from \"./message/ClearAllConfirmationModal\";\nimport { MessageEditor } from \"./message/MessageEditor\";\nimport { ShareModal } from \"./share/ShareModal\";\nimport { WebhookControls } from \"./webhook/WebhookControls\";\nconst BackupsModal = dynamic(_c = async () => import(\"../database/backup/modal/BackupsModal\").then(module => module.BackupsModal), {\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"../database/backup/modal/BackupsModal\")],\n    modules: [\"../database/backup/modal/BackupsModal\"]\n  }\n});\n_c2 = BackupsModal;\nconst EditorContainer = styled(Stack).withConfig({\n  displayName: \"Editor__EditorContainer\",\n  componentId: \"m64dfz-0\"\n})([\"padding:16px 16px 0;\"]);\n_c3 = EditorContainer;\nconst JavaScriptWarning = styled.noscript.withConfig({\n  displayName: \"Editor__JavaScriptWarning\",\n  componentId: \"m64dfz-1\"\n})([\"display:block;margin-bottom:16px;padding:16px;border-radius:4px;border:2px solid \", \";background:\", \";color:\", \";font-weight:500;line-height:1.375;\"], ({\n  theme\n}) => theme.accent.danger, ({\n  theme\n}) => transparentize(0.75, theme.accent.danger), ({\n  theme\n}) => theme.header.primary);\n_c4 = JavaScriptWarning;\nexport function Editor() {\n  _s();\n\n  const editorManager = useRequiredContext(EditorManagerContext);\n  const form = useLazyValue(() => createEditorForm(editorManager));\n  useEffect(() => () => form.dispose(), [form]);\n  const modalManager = useRequiredContext(ModalManagerContext);\n\n  const spawnBackupsModal = () => modalManager.spawn({\n    render: () => /*#__PURE__*/_jsxDEV(BackupsModal, {\n      editorManager: editorManager\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }, this)\n  });\n\n  const spawnClearAllModal = () => modalManager.spawn({\n    render: () => /*#__PURE__*/_jsxDEV(ClearAllConfirmationModal, {\n      editorManager: editorManager\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }, this)\n  });\n\n  const spawnShareModal = () => modalManager.spawn({\n    render: () => /*#__PURE__*/_jsxDEV(ShareModal, {\n      editorManager: editorManager\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }, this)\n  });\n\n  const confirmExit = usePreference(\"confirmExit\");\n  useWindowEvent(\"beforeunload\", event => {\n    if (!confirmExit) return;\n    event.preventDefault();\n    event.returnValue = \"\";\n    return \"\";\n  });\n  return useObserver(() => /*#__PURE__*/_jsxDEV(EditorContainer, {\n    gap: 16,\n    children: [/*#__PURE__*/_jsxDEV(JavaScriptWarning, {\n      children: /*#__PURE__*/_jsxDEV(Markdown, {\n        content: \"It appears your web browser has prevented this page from \" + \"executing JavaScript.\\nTo use Discohook, please allow this page \" + \"to run JavaScript from your browser's settings.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ButtonList, {\n      children: [/*#__PURE__*/_jsxDEV(SecondaryButton, {\n        onClick: () => spawnBackupsModal(),\n        children: \"Backups\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SecondaryButton, {\n        onClick: () => spawnClearAllModal(),\n        children: \"Clear All\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SecondaryButton, {\n        onClick: () => spawnShareModal(),\n        children: \"Share Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(WebhookControls, {\n      form: form\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), editorManager.messages.map((message, index) => /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MessageEditor, {\n        message: message,\n        form: form.repeatingForm(\"messages\").index(index)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)]\n    }, message.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n        onClick: () => {\n          form.repeatingForm(\"messages\").push({});\n        },\n        children: \"Add Message\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this));\n}\n\n_s(Editor, \"LSPnxQGjgyUYTqZMvSfKI+/ZY50=\", false, function () {\n  return [useRequiredContext, useLazyValue, useRequiredContext, usePreference, useWindowEvent, useObserver];\n});\n\n_c5 = Editor;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"BackupsModal$dynamic\");\n$RefreshReg$(_c2, \"BackupsModal\");\n$RefreshReg$(_c3, \"EditorContainer\");\n$RefreshReg$(_c4, \"JavaScriptWarning\");\n$RefreshReg$(_c5, \"Editor\");","map":{"version":3,"sources":["F:/DiscordHookSite/modules/editor/Editor.tsx"],"names":["useObserver","dynamic","transparentize","React","Fragment","useEffect","styled","useWindowEvent","PrimaryButton","SecondaryButton","ButtonList","Separator","Stack","ModalManagerContext","usePreference","useLazyValue","useRequiredContext","Markdown","createEditorForm","EditorManagerContext","ClearAllConfirmationModal","MessageEditor","ShareModal","WebhookControls","BackupsModal","then","module","EditorContainer","JavaScriptWarning","noscript","theme","accent","danger","header","primary","Editor","editorManager","form","dispose","modalManager","spawnBackupsModal","spawn","render","spawnClearAllModal","spawnShareModal","confirmExit","event","preventDefault","returnValue","messages","map","message","index","repeatingForm","id","push"],"mappings":"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","sourcesContent":["import { useObserver } from \"mobx-react-lite\"\r\nimport dynamic from \"next/dynamic\"\r\nimport { transparentize } from \"polished\"\r\nimport React, { Fragment, useEffect } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { useWindowEvent } from \"../../common/dom/useWindowEvent\"\r\nimport { PrimaryButton } from \"../../common/input/button/PrimaryButton\"\r\nimport { SecondaryButton } from \"../../common/input/button/SecondaryButton\"\r\nimport { ButtonList } from \"../../common/layout/ButtonList\"\r\nimport { Separator } from \"../../common/layout/Separator\"\r\nimport { Stack } from \"../../common/layout/Stack\"\r\nimport { ModalManagerContext } from \"../../common/modal/ModalManagerContext\"\r\nimport { usePreference } from \"../../common/settings/usePreference\"\r\nimport { useLazyValue } from \"../../common/state/useLazyValue\"\r\nimport { useRequiredContext } from \"../../common/state/useRequiredContext\"\r\nimport type { BackupsModalProps } from \"../database/backup/modal/BackupsModal\"\r\nimport { Markdown } from \"../markdown/Markdown\"\r\nimport { createEditorForm } from \"../message/state/editorForm\"\r\nimport type { MessageLike } from \"../message/state/models/MessageModel\"\r\nimport { EditorManagerContext } from \"./EditorManagerContext\"\r\nimport { ClearAllConfirmationModal } from \"./message/ClearAllConfirmationModal\"\r\nimport { MessageEditor } from \"./message/MessageEditor\"\r\nimport { ShareModal } from \"./share/ShareModal\"\r\nimport { WebhookControls } from \"./webhook/WebhookControls\"\r\n\r\nconst BackupsModal = dynamic<BackupsModalProps>(async () =>\r\n  import(\"../database/backup/modal/BackupsModal\").then(\r\n    module => module.BackupsModal,\r\n  ),\r\n)\r\n\r\nconst EditorContainer = styled(Stack)`\r\n  padding: 16px 16px 0;\r\n`\r\n\r\nconst JavaScriptWarning = styled.noscript`\r\n  display: block;\r\n\r\n  margin-bottom: 16px;\r\n  padding: 16px;\r\n  border-radius: 4px;\r\n\r\n  border: 2px solid ${({ theme }) => theme.accent.danger};\r\n  background: ${({ theme }) => transparentize(0.75, theme.accent.danger)};\r\n\r\n  color: ${({ theme }) => theme.header.primary};\r\n  font-weight: 500;\r\n  line-height: 1.375;\r\n`\r\n\r\nexport function Editor() {\r\n  const editorManager = useRequiredContext(EditorManagerContext)\r\n\r\n  const form = useLazyValue(() => createEditorForm(editorManager))\r\n  useEffect(() => () => form.dispose(), [form])\r\n\r\n  const modalManager = useRequiredContext(ModalManagerContext)\r\n\r\n  const spawnBackupsModal = () =>\r\n    modalManager.spawn({\r\n      render: () => <BackupsModal editorManager={editorManager} />,\r\n    })\r\n\r\n  const spawnClearAllModal = () =>\r\n    modalManager.spawn({\r\n      render: () => <ClearAllConfirmationModal editorManager={editorManager} />,\r\n    })\r\n\r\n  const spawnShareModal = () =>\r\n    modalManager.spawn({\r\n      render: () => <ShareModal editorManager={editorManager} />,\r\n    })\r\n\r\n  const confirmExit = usePreference(\"confirmExit\")\r\n  useWindowEvent(\"beforeunload\", event => {\r\n    if (!confirmExit) return\r\n\r\n    event.preventDefault()\r\n    event.returnValue = \"\"\r\n    return \"\"\r\n  })\r\n\r\n  return useObserver(() => (\r\n    <EditorContainer gap={16}>\r\n      <JavaScriptWarning>\r\n        <Markdown\r\n          content={\r\n            \"It appears your web browser has prevented this page from \" +\r\n            \"executing JavaScript.\\nTo use Discohook, please allow this page \" +\r\n            \"to run JavaScript from your browser's settings.\"\r\n          }\r\n        />\r\n      </JavaScriptWarning>\r\n      <ButtonList>\r\n        <SecondaryButton onClick={() => spawnBackupsModal()}>\r\n          Backups\r\n        </SecondaryButton>\r\n        <SecondaryButton onClick={() => spawnClearAllModal()}>\r\n          Clear All\r\n        </SecondaryButton>\r\n        <SecondaryButton onClick={() => spawnShareModal()}>\r\n          Share Message\r\n        </SecondaryButton>\r\n      </ButtonList>\r\n      <WebhookControls form={form} />\r\n      {editorManager.messages.map((message, index) => (\r\n        <Fragment key={message.id}>\r\n          <Separator />\r\n          <MessageEditor\r\n            message={message}\r\n            form={form.repeatingForm(\"messages\").index(index)}\r\n          />\r\n        </Fragment>\r\n      ))}\r\n      <Separator />\r\n      <div>\r\n        <PrimaryButton\r\n          onClick={() => {\r\n            form.repeatingForm(\"messages\").push({} as MessageLike)\r\n          }}\r\n        >\r\n          Add Message\r\n        </PrimaryButton>\r\n      </div>\r\n    </EditorContainer>\r\n  ))\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
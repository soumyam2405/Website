{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\DiscordHookSite\\\\modules\\\\editor\\\\message\\\\EmbedEditor.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useObserver } from \"mobx-react-lite\";\nimport { applyPatch, getSnapshot } from \"mobx-state-tree\";\nimport { FieldAccessor } from \"mstform\";\nimport React from \"react\";\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\";\nimport { Section } from \"../../../common/layout/Section\";\nimport { Separator } from \"../../../common/layout/Separator\";\nimport { Stack } from \"../../../common/layout/Stack\";\nimport { chevron, chevronDown } from \"../../../icons/chevron\";\nimport { copy } from \"../../../icons/copy\";\nimport { remove } from \"../../../icons/remove\";\nimport { EmbedAuthorEditor } from \"./EmbedAuthorEditor\";\nimport { EmbedBodyEditor } from \"./EmbedBodyEditor\";\nimport { EmbedFieldEditor } from \"./EmbedFieldEditor\";\nimport { EmbedFooterEditor } from \"./EmbedFooterEditor\";\nimport { EmbedImagesEditor } from \"./EmbedImagesEditor\";\nexport function EmbedEditor(props) {\n  const {\n    embed,\n    form\n  } = props;\n  const name = useObserver(() => {\n    let name = `Embed ${form.index + 1}`;\n\n    if (embed.displayName) {\n      name += ` â€” ${embed.displayName}`;\n    }\n\n    return name;\n  });\n  return useObserver(() => /*#__PURE__*/_jsxDEV(Section, {\n    name: name,\n    variant: \"large\",\n    color: embed.color,\n    actions: [form.index !== 0 && {\n      icon: chevron,\n      label: \"Move up\",\n      handler: () => {\n        var _form$parent;\n\n        applyPatch(form.state.value, [{\n          op: \"remove\",\n          path: form.path\n        }, {\n          op: \"add\",\n          path: `${(_form$parent = form.parent) === null || _form$parent === void 0 ? void 0 : _form$parent.path}/${form.index - 1}`,\n          value: getSnapshot(embed)\n        }]);\n        const parent = form.parent;\n\n        for (const accessor of parent.index(form.index - 1).flatAccessors) {\n          if (accessor instanceof FieldAccessor) {\n            accessor.setRawFromValue();\n          }\n        }\n      }\n    }, form.index !== embed.message.embeds.length - 1 && {\n      icon: chevronDown,\n      label: \"Move down\",\n      handler: () => {\n        var _form$parent2;\n\n        applyPatch(form.state.value, [{\n          op: \"remove\",\n          path: form.path\n        }, {\n          op: \"add\",\n          path: `${(_form$parent2 = form.parent) === null || _form$parent2 === void 0 ? void 0 : _form$parent2.path}/${form.index + 1}`,\n          value: getSnapshot(embed)\n        }]);\n        const parent = form.parent;\n\n        for (const accessor of parent.index(form.index + 1).flatAccessors) {\n          if (accessor instanceof FieldAccessor) {\n            accessor.setRawFromValue();\n          }\n        }\n      }\n    }, embed.message.size < 10 && {\n      icon: copy,\n      label: \"Duplicate\",\n      handler: () => {\n        var _form$parent3;\n\n        applyPatch(form.state.value, [{\n          op: \"add\",\n          path: `${(_form$parent3 = form.parent) === null || _form$parent3 === void 0 ? void 0 : _form$parent3.path}/${form.index + 1}`,\n          value: _objectSpread(_objectSpread({}, getSnapshot(embed)), {}, {\n            id: undefined\n          })\n        }]);\n        const parent = form.parent;\n\n        for (const accessor of parent.index(form.index + 1).flatAccessors) {\n          if (accessor instanceof FieldAccessor) {\n            accessor.setRawFromValue();\n          }\n        }\n      }\n    }, {\n      icon: remove,\n      label: \"Remove\",\n      handler: () => {\n        applyPatch(form.state.value, [{\n          op: \"remove\",\n          path: form.path\n        }]);\n      }\n    }].filter(item => typeof item === \"object\"),\n    hasError: !form.isValid,\n    children: /*#__PURE__*/_jsxDEV(Stack, {\n      gap: 16,\n      children: [/*#__PURE__*/_jsxDEV(EmbedAuthorEditor, {\n        embed: embed,\n        form: form\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EmbedBodyEditor, {\n        embed: embed,\n        form: form\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Section, {\n        name: \"Fields\",\n        variant: \"indented\",\n        hasError: !form.repeatingForm(\"fields\").isValid,\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          gap: 16,\n          children: [embed.fields.map((field, index) => /*#__PURE__*/_jsxDEV(EmbedFieldEditor, {\n            field: field,\n            form: form.repeatingForm(\"fields\").index(index)\n          }, field.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(PrimaryButton, {\n              disabled: embed.fields.length >= 25,\n              onClick: () => {\n                form.repeatingForm(\"fields\").push({});\n              },\n              children: \"Add Field\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EmbedImagesEditor, {\n        embed: embed,\n        form: form\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Separator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EmbedFooterEditor, {\n        embed: embed,\n        form: form\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this));\n}","map":{"version":3,"sources":["F:/DiscordHookSite/modules/editor/message/EmbedEditor.tsx"],"names":["useObserver","applyPatch","getSnapshot","FieldAccessor","React","PrimaryButton","Section","Separator","Stack","chevron","chevronDown","copy","remove","EmbedAuthorEditor","EmbedBodyEditor","EmbedFieldEditor","EmbedFooterEditor","EmbedImagesEditor","EmbedEditor","props","embed","form","name","index","displayName","color","icon","label","handler","state","value","op","path","parent","accessor","flatAccessors","setRawFromValue","message","embeds","length","size","id","undefined","filter","item","isValid","repeatingForm","fields","map","field","push"],"mappings":"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","sourcesContent":["import { useObserver } from \"mobx-react-lite\"\r\nimport { applyPatch, getSnapshot } from \"mobx-state-tree\"\r\nimport { FieldAccessor } from \"mstform\"\r\nimport React from \"react\"\r\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\"\r\nimport type { Action } from \"../../../common/layout/ActionButtons\"\r\nimport { Section } from \"../../../common/layout/Section\"\r\nimport { Separator } from \"../../../common/layout/Separator\"\r\nimport { Stack } from \"../../../common/layout/Stack\"\r\nimport { chevron, chevronDown } from \"../../../icons/chevron\"\r\nimport { copy } from \"../../../icons/copy\"\r\nimport { remove } from \"../../../icons/remove\"\r\nimport type {\r\n  EmbedItemFormState,\r\n  RepeatingEmbedItemFormState,\r\n} from \"../../message/state/editorForm\"\r\nimport type { EmbedLike } from \"../../message/state/models/EmbedModel\"\r\nimport type { FieldLike } from \"../../message/state/models/FieldModel\"\r\nimport { EmbedAuthorEditor } from \"./EmbedAuthorEditor\"\r\nimport { EmbedBodyEditor } from \"./EmbedBodyEditor\"\r\nimport { EmbedFieldEditor } from \"./EmbedFieldEditor\"\r\nimport { EmbedFooterEditor } from \"./EmbedFooterEditor\"\r\nimport { EmbedImagesEditor } from \"./EmbedImagesEditor\"\r\n\r\nexport type EmbedEditorProps = {\r\n  embed: EmbedLike\r\n  form: EmbedItemFormState\r\n}\r\n\r\nexport function EmbedEditor(props: EmbedEditorProps) {\r\n  const { embed, form } = props\r\n\r\n  const name = useObserver(() => {\r\n    let name = `Embed ${form.index + 1}`\r\n    if (embed.displayName) {\r\n      name += ` â€” ${embed.displayName}`\r\n    }\r\n    return name\r\n  })\r\n\r\n  return useObserver(() => (\r\n    <Section\r\n      name={name}\r\n      variant=\"large\"\r\n      color={embed.color}\r\n      actions={[\r\n        form.index !== 0 && {\r\n          icon: chevron,\r\n          label: \"Move up\",\r\n          handler: () => {\r\n            applyPatch(form.state.value, [\r\n              {\r\n                op: \"remove\",\r\n                path: form.path,\r\n              },\r\n              {\r\n                op: \"add\",\r\n                path: `${form.parent?.path}/${form.index - 1}`,\r\n                value: getSnapshot(embed),\r\n              },\r\n            ])\r\n            const parent = form.parent as RepeatingEmbedItemFormState\r\n            for (const accessor of parent.index(form.index - 1).flatAccessors) {\r\n              if (accessor instanceof FieldAccessor) {\r\n                accessor.setRawFromValue()\r\n              }\r\n            }\r\n          },\r\n        },\r\n        form.index !== embed.message.embeds.length - 1 && {\r\n          icon: chevronDown,\r\n          label: \"Move down\",\r\n          handler: () => {\r\n            applyPatch(form.state.value, [\r\n              {\r\n                op: \"remove\",\r\n                path: form.path,\r\n              },\r\n              {\r\n                op: \"add\",\r\n                path: `${form.parent?.path}/${form.index + 1}`,\r\n                value: getSnapshot(embed),\r\n              },\r\n            ])\r\n            const parent = form.parent as RepeatingEmbedItemFormState\r\n            for (const accessor of parent.index(form.index + 1).flatAccessors) {\r\n              if (accessor instanceof FieldAccessor) {\r\n                accessor.setRawFromValue()\r\n              }\r\n            }\r\n          },\r\n        },\r\n        embed.message.size < 10 && {\r\n          icon: copy,\r\n          label: \"Duplicate\",\r\n          handler: () => {\r\n            applyPatch(form.state.value, [\r\n              {\r\n                op: \"add\",\r\n                path: `${form.parent?.path}/${form.index + 1}`,\r\n                value: { ...getSnapshot(embed), id: undefined },\r\n              },\r\n            ])\r\n            const parent = form.parent as RepeatingEmbedItemFormState\r\n            for (const accessor of parent.index(form.index + 1).flatAccessors) {\r\n              if (accessor instanceof FieldAccessor) {\r\n                accessor.setRawFromValue()\r\n              }\r\n            }\r\n          },\r\n        },\r\n        {\r\n          icon: remove,\r\n          label: \"Remove\",\r\n          handler: () => {\r\n            applyPatch(form.state.value, [\r\n              {\r\n                op: \"remove\",\r\n                path: form.path,\r\n              },\r\n            ])\r\n          },\r\n        },\r\n      ].filter((item): item is Action => typeof item === \"object\")}\r\n      hasError={!form.isValid}\r\n    >\r\n      <Stack gap={16}>\r\n        <EmbedAuthorEditor embed={embed} form={form} />\r\n        <Separator />\r\n        <EmbedBodyEditor embed={embed} form={form} />\r\n        <Separator />\r\n        <Section\r\n          name=\"Fields\"\r\n          variant=\"indented\"\r\n          hasError={!form.repeatingForm(\"fields\").isValid}\r\n        >\r\n          <Stack gap={16}>\r\n            {embed.fields.map((field, index) => (\r\n              <EmbedFieldEditor\r\n                key={field.id}\r\n                field={field}\r\n                form={form.repeatingForm(\"fields\").index(index)}\r\n              />\r\n            ))}\r\n            <div>\r\n              <PrimaryButton\r\n                disabled={embed.fields.length >= 25}\r\n                onClick={() => {\r\n                  form.repeatingForm(\"fields\").push({} as FieldLike)\r\n                }}\r\n              >\r\n                Add Field\r\n              </PrimaryButton>\r\n            </div>\r\n          </Stack>\r\n        </Section>\r\n        <Separator />\r\n        <EmbedImagesEditor embed={embed} form={form} />\r\n        <Separator />\r\n        <EmbedFooterEditor embed={embed} form={form} />\r\n      </Stack>\r\n    </Section>\r\n  ))\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"F:/DiscordHookSite/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"F:\\\\DiscordHookSite\\\\common\\\\input\\\\color\\\\ColorPicker.tsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { linearGradient, rgb, rgba, size } from \"polished\";\nimport React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { useDragArea } from \"../../dom/useDragArea\";\nimport { FlexContainer } from \"../../layout/FlexContainer\";\nimport { useAutorun } from \"../../state/useAutorun\";\nimport { ColorModel } from \"./ColorModel\";\nconst Picker = styled.div.withConfig({\n  displayName: \"ColorPicker__Picker\",\n  componentId: \"sc-194jjtz-0\"\n})([\"width:220px;height:150px;border-radius:4px;\"]);\n_c = Picker;\nconst PickerLayer = styled.div.withConfig({\n  displayName: \"ColorPicker__PickerLayer\",\n  componentId: \"sc-194jjtz-1\"\n})([\"\", \";border-radius:4px;\"], size(\"100%\"));\n_c2 = PickerLayer;\nconst PickerKnob = styled.div.withConfig({\n  displayName: \"ColorPicker__PickerKnob\",\n  componentId: \"sc-194jjtz-2\"\n})([\"\", \";border-radius:50%;background:white;border:2px solid white;\"], size(11));\n_c3 = PickerKnob;\nconst HueSlider = styled.div.withConfig({\n  displayName: \"ColorPicker__HueSlider\",\n  componentId: \"sc-194jjtz-3\"\n})([\"\", \" margin-left:16px;width:12px;height:150px;border-radius:4px;&&{flex:0 0 auto;}\"], linearGradient({\n  colorStops: [rgb(255, 0, 0), rgb(255, 255, 0), rgb(0, 255, 0), rgb(0, 255, 255), rgb(0, 0, 255), rgb(255, 0, 255), rgb(255, 0, 0)],\n  toDirection: \"to bottom\"\n}));\n_c4 = HueSlider;\nconst SliderKnob = styled.div.withConfig({\n  displayName: \"ColorPicker__SliderKnob\",\n  componentId: \"sc-194jjtz-4\"\n})([\"width:16px;height:8px;border-radius:3px;background:white;\"]);\n_c5 = SliderKnob;\nexport function ColorPicker(props) {\n  _s();\n\n  const {\n    color\n  } = props;\n  const pickerRef = useRef(null);\n  const pickerKnobRef = useRef(null);\n  const sliderRef = useRef(null);\n  const sliderKnobRef = useRef(null);\n  useAutorun(() => {\n    var _pureColor$hex, _color$hex;\n\n    const {\n      current: picker\n    } = pickerRef;\n    const {\n      current: pickerKnob\n    } = pickerKnobRef;\n    const {\n      current: slider\n    } = sliderRef;\n    const {\n      current: sliderKnob\n    } = sliderKnobRef;\n    if (!picker || !pickerKnob || !slider || !sliderKnob) return;\n    pickerKnob.style.visibility = \"visible\";\n    sliderKnob.style.visibility = \"visible\";\n    const {\n      width: pickerWidth,\n      height: pickerHeight\n    } = picker.getBoundingClientRect();\n    const {\n      height: sliderHeight\n    } = slider.getBoundingClientRect();\n    const pureColor = ColorModel.create({\n      hue: color.hue,\n      saturation: 1,\n      value: 1\n    });\n    picker.style.backgroundColor = (_pureColor$hex = pureColor.hex) !== null && _pureColor$hex !== void 0 ? _pureColor$hex : \"#ff0000\";\n    const pickerX = (color.saturation || 0) * pickerWidth - 6;\n    const pickerY = (1 - (color.value || 0)) * pickerHeight - 6;\n    pickerKnob.style.transform = `translate(${pickerX}px, ${pickerY}px)`;\n    pickerKnob.style.backgroundColor = (_color$hex = color.hex) !== null && _color$hex !== void 0 ? _color$hex : rgb(0, 0, 0);\n    const normalHue = (color.hue || 0) / 360;\n    sliderKnob.style.transform = `translateX(-2px) translateY(${normalHue * sliderHeight - 4}px)`;\n  });\n  useDragArea(sliderRef, (mouseX, mouseY) => {\n    color.setHue(mouseY * 360);\n  });\n  useDragArea(pickerRef, (mouseX, mouseY) => {\n    if (!color.valid) color.setHue(0);\n    color.setSaturation(mouseX);\n    color.setValue(1 - mouseY);\n  });\n  return /*#__PURE__*/_jsxDEV(FlexContainer, {\n    children: [/*#__PURE__*/_jsxDEV(Picker, {\n      ref: pickerRef,\n      children: /*#__PURE__*/_jsxDEV(PickerLayer, {\n        style: _objectSpread({}, linearGradient({\n          colorStops: [rgb(255, 255, 255), rgba(255, 255, 255, 0)],\n          fallback: rgba(0, 0, 0, 0),\n          toDirection: \"to right\"\n        })),\n        children: /*#__PURE__*/_jsxDEV(PickerLayer, {\n          style: _objectSpread({}, linearGradient({\n            colorStops: [rgba(0, 0, 0, 0), rgb(0, 0, 0)],\n            fallback: rgba(0, 0, 0, 0),\n            toDirection: \"to bottom\"\n          })),\n          children: /*#__PURE__*/_jsxDEV(PickerKnob, {\n            ref: pickerKnobRef,\n            style: {\n              visibility: \"hidden\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HueSlider, {\n      ref: sliderRef,\n      children: /*#__PURE__*/_jsxDEV(SliderKnob, {\n        ref: sliderKnobRef,\n        style: {\n          visibility: \"hidden\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ColorPicker, \"xa+zL/Jlz8kO3lJjlmdYSgfDoxM=\", false, function () {\n  return [useAutorun, useDragArea, useDragArea];\n});\n\n_c6 = ColorPicker;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Picker\");\n$RefreshReg$(_c2, \"PickerLayer\");\n$RefreshReg$(_c3, \"PickerKnob\");\n$RefreshReg$(_c4, \"HueSlider\");\n$RefreshReg$(_c5, \"SliderKnob\");\n$RefreshReg$(_c6, \"ColorPicker\");","map":{"version":3,"sources":["F:/DiscordHookSite/common/input/color/ColorPicker.tsx"],"names":["linearGradient","rgb","rgba","size","React","useRef","styled","useDragArea","FlexContainer","useAutorun","ColorModel","Picker","div","PickerLayer","PickerKnob","HueSlider","colorStops","toDirection","SliderKnob","ColorPicker","props","color","pickerRef","pickerKnobRef","sliderRef","sliderKnobRef","current","picker","pickerKnob","slider","sliderKnob","style","visibility","width","pickerWidth","height","pickerHeight","getBoundingClientRect","sliderHeight","pureColor","create","hue","saturation","value","backgroundColor","hex","pickerX","pickerY","transform","normalHue","mouseX","mouseY","setHue","valid","setSaturation","setValue","fallback"],"mappings":"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","sourcesContent":["import { linearGradient, rgb, rgba, size } from \"polished\"\r\nimport React, { useRef } from \"react\"\r\nimport styled from \"styled-components\"\r\nimport { useDragArea } from \"../../dom/useDragArea\"\r\nimport { FlexContainer } from \"../../layout/FlexContainer\"\r\nimport { useAutorun } from \"../../state/useAutorun\"\r\nimport { ColorLike, ColorModel } from \"./ColorModel\"\r\n\r\nconst Picker = styled.div`\r\n  width: 220px;\r\n  height: 150px;\r\n\r\n  border-radius: 4px;\r\n`\r\n\r\nconst PickerLayer = styled.div`\r\n  ${size(\"100%\")};\r\n\r\n  border-radius: 4px;\r\n`\r\n\r\nconst PickerKnob = styled.div`\r\n  ${size(11)};\r\n\r\n  border-radius: 50%;\r\n\r\n  background: white;\r\n  border: 2px solid white;\r\n`\r\n\r\nconst HueSlider = styled.div`\r\n  ${linearGradient({\r\n    colorStops: [\r\n      rgb(255, 0, 0),\r\n      rgb(255, 255, 0),\r\n      rgb(0, 255, 0),\r\n      rgb(0, 255, 255),\r\n      rgb(0, 0, 255),\r\n      rgb(255, 0, 255),\r\n      rgb(255, 0, 0),\r\n    ],\r\n    toDirection: \"to bottom\",\r\n  })}\r\n\r\n  margin-left: 16px;\r\n\r\n  width: 12px;\r\n  height: 150px;\r\n\r\n  border-radius: 4px;\r\n\r\n  && {\r\n    flex: 0 0 auto;\r\n  }\r\n`\r\n\r\nconst SliderKnob = styled.div`\r\n  width: 16px;\r\n  height: 8px;\r\n\r\n  border-radius: 3px;\r\n\r\n  background: white;\r\n`\r\n\r\nexport type ColorPickerProps = {\r\n  color: ColorLike\r\n}\r\n\r\nexport function ColorPicker(props: ColorPickerProps) {\r\n  const { color } = props\r\n\r\n  const pickerRef = useRef<HTMLDivElement>(null)\r\n  const pickerKnobRef = useRef<HTMLDivElement>(null)\r\n  const sliderRef = useRef<HTMLDivElement>(null)\r\n  const sliderKnobRef = useRef<HTMLDivElement>(null)\r\n\r\n  useAutorun(() => {\r\n    const { current: picker } = pickerRef\r\n    const { current: pickerKnob } = pickerKnobRef\r\n    const { current: slider } = sliderRef\r\n    const { current: sliderKnob } = sliderKnobRef\r\n\r\n    if (!picker || !pickerKnob || !slider || !sliderKnob) return\r\n\r\n    pickerKnob.style.visibility = \"visible\"\r\n    sliderKnob.style.visibility = \"visible\"\r\n\r\n    const {\r\n      width: pickerWidth,\r\n      height: pickerHeight,\r\n    } = picker.getBoundingClientRect()\r\n    const { height: sliderHeight } = slider.getBoundingClientRect()\r\n\r\n    const pureColor = ColorModel.create({\r\n      hue: color.hue,\r\n      saturation: 1,\r\n      value: 1,\r\n    })\r\n    picker.style.backgroundColor = pureColor.hex ?? \"#ff0000\"\r\n\r\n    const pickerX = (color.saturation || 0) * pickerWidth - 6\r\n    const pickerY = (1 - (color.value || 0)) * pickerHeight - 6\r\n    pickerKnob.style.transform = `translate(${pickerX}px, ${pickerY}px)`\r\n    pickerKnob.style.backgroundColor = color.hex ?? rgb(0, 0, 0)\r\n\r\n    const normalHue = (color.hue || 0) / 360\r\n    sliderKnob.style.transform = `translateX(-2px) translateY(${\r\n      normalHue * sliderHeight - 4\r\n    }px)`\r\n  })\r\n\r\n  useDragArea(sliderRef, (mouseX, mouseY) => {\r\n    color.setHue(mouseY * 360)\r\n  })\r\n\r\n  useDragArea(pickerRef, (mouseX, mouseY) => {\r\n    if (!color.valid) color.setHue(0)\r\n\r\n    color.setSaturation(mouseX)\r\n    color.setValue(1 - mouseY)\r\n  })\r\n\r\n  return (\r\n    <FlexContainer>\r\n      <Picker ref={pickerRef}>\r\n        <PickerLayer\r\n          style={{\r\n            ...linearGradient({\r\n              colorStops: [rgb(255, 255, 255), rgba(255, 255, 255, 0)],\r\n              fallback: rgba(0, 0, 0, 0),\r\n              toDirection: \"to right\",\r\n            }),\r\n          }}\r\n        >\r\n          <PickerLayer\r\n            style={{\r\n              ...linearGradient({\r\n                colorStops: [rgba(0, 0, 0, 0), rgb(0, 0, 0)],\r\n                fallback: rgba(0, 0, 0, 0),\r\n                toDirection: \"to bottom\",\r\n              }),\r\n            }}\r\n          >\r\n            <PickerKnob ref={pickerKnobRef} style={{ visibility: \"hidden\" }} />\r\n          </PickerLayer>\r\n        </PickerLayer>\r\n      </Picker>\r\n      <HueSlider ref={sliderRef}>\r\n        <SliderKnob ref={sliderKnobRef} style={{ visibility: \"hidden\" }} />\r\n      </HueSlider>\r\n    </FlexContainer>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
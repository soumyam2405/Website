{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"F:\\\\DiscordHookSite\\\\modules\\\\editor\\\\share\\\\ShareModal.tsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { copyTextToClipboard } from \"../../../common/dom/copyTextToClipboard\";\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\";\nimport { SecondaryButton } from \"../../../common/input/button/SecondaryButton\";\nimport { ModalAction } from \"../../../common/modal/layout/ModalAction\";\nimport { ModalBody } from \"../../../common/modal/layout/ModalBody\";\nimport { ModalContainer } from \"../../../common/modal/layout/ModalContainer\";\nimport { ModalFooter } from \"../../../common/modal/layout/ModalFooter\";\nimport { ModalHeader } from \"../../../common/modal/layout/ModalHeader\";\nimport { ModalTitle } from \"../../../common/modal/layout/ModalTitle\";\nimport { ModalContext } from \"../../../common/modal/ModalContext\";\nimport { useRequiredContext } from \"../../../common/state/useRequiredContext\";\nimport { shorten } from \"../../../common/utilities/shorten\";\nimport { remove } from \"../../../icons/remove\";\nimport { Markdown } from \"../../markdown/Markdown\";\nimport { getEditorUrl } from \"../getEditorUrl\";\nexport function ShareModal(props) {\n  const {\n    editorManager\n  } = props;\n  const modal = useRequiredContext(ModalContext);\n  const {\n    0: response,\n    1: setResponse\n  } = useState();\n  useEffect(() => {\n    const url = getEditorUrl(editorManager);\n    shorten(url).then(response => setResponse(response)).catch(() => setResponse(null));\n  }, [editorManager]);\n  let content = \"Getting short URL...\";\n\n  if (response) {\n    const formattedExpires = response.expires.toLocaleString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n      hour: \"numeric\",\n      minute: \"numeric\",\n      hour12: true\n    });\n    content = `URL: <${response.url}>\\nThis link expires at ${formattedExpires}.`;\n  } else if (response === null) {\n    content = \"Failed getting short URL. Please try again later.\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(ModalContainer, {\n    children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n      children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n        children: \"Share\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalAction, {\n        icon: remove,\n        label: \"Close\",\n        onClick: () => modal.dismiss()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n      children: /*#__PURE__*/_jsxDEV(Markdown, {\n        content: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n      children: [/*#__PURE__*/_jsxDEV(SecondaryButton, {\n        disabled: !response,\n        onClick: () => {\n          var _response$url;\n\n          copyTextToClipboard((_response$url = response === null || response === void 0 ? void 0 : response.url) !== null && _response$url !== void 0 ? _response$url : \"\");\n        },\n        children: \"Copy Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PrimaryButton, {\n        onClick: () => {\n          modal.dismiss();\n        },\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["F:/DiscordHookSite/modules/editor/share/ShareModal.tsx"],"names":["React","useEffect","useState","copyTextToClipboard","PrimaryButton","SecondaryButton","ModalAction","ModalBody","ModalContainer","ModalFooter","ModalHeader","ModalTitle","ModalContext","useRequiredContext","shorten","remove","Markdown","getEditorUrl","ShareModal","props","editorManager","modal","response","setResponse","url","then","catch","content","formattedExpires","expires","toLocaleString","year","month","day","hour","minute","hour12","dismiss"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { copyTextToClipboard } from \"../../../common/dom/copyTextToClipboard\"\r\nimport { PrimaryButton } from \"../../../common/input/button/PrimaryButton\"\r\nimport { SecondaryButton } from \"../../../common/input/button/SecondaryButton\"\r\nimport { ModalAction } from \"../../../common/modal/layout/ModalAction\"\r\nimport { ModalBody } from \"../../../common/modal/layout/ModalBody\"\r\nimport { ModalContainer } from \"../../../common/modal/layout/ModalContainer\"\r\nimport { ModalFooter } from \"../../../common/modal/layout/ModalFooter\"\r\nimport { ModalHeader } from \"../../../common/modal/layout/ModalHeader\"\r\nimport { ModalTitle } from \"../../../common/modal/layout/ModalTitle\"\r\nimport { ModalContext } from \"../../../common/modal/ModalContext\"\r\nimport { useRequiredContext } from \"../../../common/state/useRequiredContext\"\r\nimport { shorten, ShortenResponse } from \"../../../common/utilities/shorten\"\r\nimport { remove } from \"../../../icons/remove\"\r\nimport { Markdown } from \"../../markdown/Markdown\"\r\nimport type { EditorManagerLike } from \"../EditorManager\"\r\nimport { getEditorUrl } from \"../getEditorUrl\"\r\n\r\nexport type ShareModalProps = {\r\n  editorManager: EditorManagerLike\r\n}\r\n\r\nexport function ShareModal(props: ShareModalProps) {\r\n  const { editorManager } = props\r\n\r\n  const modal = useRequiredContext(ModalContext)\r\n\r\n  const [response, setResponse] = useState<ShortenResponse | null>()\r\n\r\n  useEffect(() => {\r\n    const url = getEditorUrl(editorManager)\r\n\r\n    shorten(url)\r\n      .then(response => setResponse(response))\r\n      .catch(() => setResponse(null))\r\n  }, [editorManager])\r\n\r\n  let content = \"Getting short URL...\"\r\n  if (response) {\r\n    const formattedExpires = response.expires.toLocaleString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"numeric\",\r\n      minute: \"numeric\",\r\n      hour12: true,\r\n    })\r\n\r\n    content = `URL: <${response.url}>\\nThis link expires at ${formattedExpires}.`\r\n  } else if (response === null) {\r\n    content = \"Failed getting short URL. Please try again later.\"\r\n  }\r\n\r\n  return (\r\n    <ModalContainer>\r\n      <ModalHeader>\r\n        <ModalTitle>Share</ModalTitle>\r\n        <ModalAction\r\n          icon={remove}\r\n          label=\"Close\"\r\n          onClick={() => modal.dismiss()}\r\n        />\r\n      </ModalHeader>\r\n      <ModalBody>\r\n        <Markdown content={content} />\r\n      </ModalBody>\r\n      <ModalFooter>\r\n        <SecondaryButton\r\n          disabled={!response}\r\n          onClick={() => {\r\n            copyTextToClipboard(response?.url ?? \"\")\r\n          }}\r\n        >\r\n          Copy Link\r\n        </SecondaryButton>\r\n        <PrimaryButton\r\n          onClick={() => {\r\n            modal.dismiss()\r\n          }}\r\n        >\r\n          Close\r\n        </PrimaryButton>\r\n      </ModalFooter>\r\n    </ModalContainer>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}